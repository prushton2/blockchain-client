<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <h1>Blockchain</h1>

        <table>
            <tr>
                <td>
                    Active User Name: <br>
                    <input id="activeUser"> <button onClick="setActiveUser()">Set</button>
                </td>
                <td>
                    <label id="ActiveUserResponse"></label>
                </td>
            </tr>
            <tr>
                <td>
                    Create User:<br>
                    <input id="newUserName"> <button onclick="newUser()">Create User</button>
                </td>
                <td>
                    <label id="NewUserResponse"></label>
                </td>
            </tr>
            <tr>

                <td>
                    Encrypt:<br>
                    <input id="messageToEncrypt"> <button onclick="crypt('Encrypt')">Encrypt</button><br>
                </td>
                <td>
                    <label id="EncryptResponse"></label>
                </td>
            </tr>
            <tr></tr>
                <td>
                    Decrypt:<br>
                    <input id="messageToDecrypt"> <button onclick="crypt('Decrypt')">Decrypt</button><br>
                </td>
                <td>
                    <label id="DecryptResponse"></label>
                </td>
            </tr>
        </table>




        <script>

            const newUser = async() => {
                userName = document.getElementById(`newUserName`).value
                document.getElementById("NewUserResponse").value = await sendCommand(`NewUser/${userName}`)
            }

            const crypt = async(d_or_e) => {
                message = document.getElementById(`messageTo${d_or_e}`).value
                console.log(message)
                response = await sendCommand(`${d_or_e}/${message}`)
                document.getElementById(`${d_or_e}Response`).innerHTML = response
            }

            const setActiveUser = async() => {
                name = document.getElementById("activeUser").value
                response = await sendCommand(`setActiveUser/${name}`)
                document.getElementById("ActiveUserResponse").innerHTML = response 
            }

            const sendCommand = async(text) => {
                return await fetch(`http://localhost:5000/${text}`).then((response) => {return response.text()})
            }
        </script>
        <style type="text/css" media="screen">
            body {
                color: #D4D4D4;
                background-color: #1e1e1e;
            }
            h1 {
                size: 200%;
            }
            input {
                color: #D4D4D4;
                background-color: #2f2f2f;
            }
            button {
                color: #D4D4D4;
                background-color: #2f2f2f;
            }
            label {
                color: #D4D4D4;
            }
                
        </style>
    </body>
</html>