<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <h1>Blockchain</h1>


        <table>
            <tr>
                <td>

                    Active User Name: <br>
                    <input id="activeUser"> <button onClick="setActiveUser()">Set</button><br>
                    
                    <label id="ActiveUserResponse"></label><br><br>
                </td>
                <td>
                    Create User:<br>
                    <input id="newUserName"> <button onclick="newUser()">Create User</button><br>
            
                    <label id="NewUserResponse"></label><br><br>
                </td>    
            </tr>
            <tr>
                <td>
                    Create a new Block:<br>
                    <input id="BlockchainInfo" placeholder="Block Info"> <button onclick="newBlock()">Create Block</button><br>
                    <label id="BlockchainResponse"></label><br><br>
                </td>
                <td></td>
        </tr>
        </table>
        
        <br>
        <br>

        Encrypt:<br>
        <input id="messageToEncrypt"> <button onclick="crypt('Encrypt')">Encrypt</button><br>

        <label id="EncryptResponse"></label><br><br>

        Decrypt:<br>
        <input id="messageToDecrypt"> <button onclick="crypt('Decrypt')">Decrypt</button><br>

        <label id="DecryptResponse"></label><br><br>

        List:<br>
        <input id="lsInput" placeholder="Search"></input> <button onclick="search()">Search</button><br>

        <label id="lsOutput"></label>




        <script>
            const search = async() => {
                value = document.getElementById("lsInput").value
                document.getElementById("lsOutput").innerHTML = "Searching..."
                document.getElementById("lsOutput").innerHTML = await sendCommand(`ls/${value}`)
            }

            const newBlock = async() => {
                value = document.getElementById(`BlockchainInfo`).value
                document.getElementById("BlockchainResponse").innerHTML = "Creating Block..."
                document.getElementById("BlockchainResponse").innerHTML = await sendCommand(`NewBlock/${value}`)
            }

            const newUser = async() => {
                userName = document.getElementById(`newUserName`).value
                document.getElementById("NewUserResponse").innerHTML = "Creating User..."
                document.getElementById("NewUserResponse").innerHTML = await sendCommand(`NewUser/${userName}`)
            }

            const crypt = async(d_or_e) => {
                message = document.getElementById(`messageTo${d_or_e}`).value
                response = await sendCommand(`${d_or_e}/${message}`)
                document.getElementById(`${d_or_e}Response`).innerHTML = response
            }

            const setActiveUser = async() => {
                name = document.getElementById("activeUser").value
                response = await sendCommand(`setActiveUser/${name}`)
                document.getElementById("ActiveUserResponse").innerHTML = response 
            }

            const sendCommand = async(text) => {
                return await fetch(`http://localhost:5000/${text}`).then((response) => {return response.text()})
            }
        </script>
        <style type="text/css" media="screen">
            body {
                color: #D4D4D4;
                background-color: #1e1e1e;
            }
            h1 {
                size: 200%;
            }
            input {
                color: #D4D4D4;
                background-color: #2f2f2f;
            }
            button {
                color: #D4D4D4;
                background-color: #2f2f2f;
            }
            label {
                color: #D4D4D4;
            }
                
        </style>
    </body>
</html>